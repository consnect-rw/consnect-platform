enum EConversationType {
     SUPPORT 
     CHAT
}

model Conversation {
     id String @id @default(uuid())
     type EConversationType
     participants String[]
     createdAt DateTime @default(now())

     messages Message[]
}

enum EMessageStatus {
     SENT 
     DELIVERED
     READ
}

model Message {
     id String @id @default(uuid())
     message String 
     files String[]
     status EMessageStatus @default(SENT)
     createdAt DateTime @default(now())
     updatedAt DateTime @updatedAt

     repliedMessageId String?
     repliedMessage Message? @relation("ReplyMessage",fields: [repliedMessageId], references: [id])

     senderId String
     sender User @relation("MessageSender",fields: [senderId], references: [id])
     receiverId String
     receiver User? @relation("MessageReceiver",fields: [receiverId], references: [id])



     conversationId String?
     conversation Conversation? @relation(fields: [conversationId], references: [id])
     replies Message[] @relation("ReplyMessage")
}